<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="An image loading library designed for Compose Multiplatform and Android View. It is powerful and rich in functions. In addition to basic functions, it also supports GIF, SVG, video thumbnails, Exif Orientation, etc."><meta name=author content="2024 panpf"><link href=https://github.com/panpf/sketch/CHANGELOG/ rel=canonical><link href=../migrate/ rel=prev><link rel=icon href=../images/logo.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.16"><title>Change Log - Sketch Image Loader</title><link rel=stylesheet href=../assets/stylesheets/main.7e37652d.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=JetBrains:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"JetBrains";--md-code-font:"JetBrains Mono"}</style><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#change-log class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="Sketch Image Loader" class="md-header__button md-logo" aria-label="Sketch Image Loader" data-md-component=logo> <img src=../images/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Sketch Image Loader </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Change Log </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=white aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=black aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <div class=md-header__option> <div class=md-select> <button class="md-header__button md-icon" aria-label="Select language"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg> </button> <div class=md-select__inner> <ul class=md-select__list> <li class=md-select__item> <a href=./ hreflang=en class=md-select__link> English </a> </li> <li class=md-select__item> <a href=../zh/CHANGELOG/ hreflang=zh class=md-select__link> 中文 </a> </li> </ul> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/panpf/sketch title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> Sketch </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="Sketch Image Loader" class="md-nav__button md-logo" aria-label="Sketch Image Loader" data-md-component=logo> <img src=../images/logo.png alt=logo> </a> Sketch Image Loader </label> <div class=md-nav__source> <a href=https://github.com/panpf/sketch title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> Sketch </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../getting_started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=../register_component/ class=md-nav__link> <span class=md-ellipsis> Register Component </span> </a> </li> <li class=md-nav__item> <a href=../compose/ class=md-nav__link> <span class=md-ellipsis> Compose </span> </a> </li> <li class=md-nav__item> <a href=../http/ class=md-nav__link> <span class=md-ellipsis> Http </span> </a> </li> <li class=md-nav__item> <a href=../animated_image/ class=md-nav__link> <span class=md-ellipsis> Animated Image </span> </a> </li> <li class=md-nav__item> <a href=../resize/ class=md-nav__link> <span class=md-ellipsis> Resize </span> </a> </li> <li class=md-nav__item> <a href=../transformation/ class=md-nav__link> <span class=md-ellipsis> Transformation </span> </a> </li> <li class=md-nav__item> <a href=../transition/ class=md-nav__link> <span class=md-ellipsis> Transition </span> </a> </li> <li class=md-nav__item> <a href=../state_image/ class=md-nav__link> <span class=md-ellipsis> StateImage </span> </a> </li> <li class=md-nav__item> <a href=../listener/ class=md-nav__link> <span class=md-ellipsis> Listener </span> </a> </li> <li class=md-nav__item> <a href=../download_cache/ class=md-nav__link> <span class=md-ellipsis> DownloadCache </span> </a> </li> <li class=md-nav__item> <a href=../result_cache/ class=md-nav__link> <span class=md-ellipsis> ResultCache </span> </a> </li> <li class=md-nav__item> <a href=../memory_cache/ class=md-nav__link> <span class=md-ellipsis> MemoryCache </span> </a> </li> <li class=md-nav__item> <a href=../fetcher/ class=md-nav__link> <span class=md-ellipsis> Fetcher </span> </a> </li> <li class=md-nav__item> <a href=../decoder/ class=md-nav__link> <span class=md-ellipsis> Decoder </span> </a> </li> <li class=md-nav__item> <a href=../target/ class=md-nav__link> <span class=md-ellipsis> Target </span> </a> </li> <li class=md-nav__item> <a href=../svg/ class=md-nav__link> <span class=md-ellipsis> SVG </span> </a> </li> <li class=md-nav__item> <a href=../video_frame/ class=md-nav__link> <span class=md-ellipsis> Video Frames </span> </a> </li> <li class=md-nav__item> <a href=../blurhash/ class=md-nav__link> <span class=md-ellipsis> BlurHash </span> </a> </li> <li class=md-nav__item> <a href=../exif_orientation/ class=md-nav__link> <span class=md-ellipsis> Exif Orientation </span> </a> </li> <li class=md-nav__item> <a href=../image_options/ class=md-nav__link> <span class=md-ellipsis> ImageOptions </span> </a> </li> <li class=md-nav__item> <a href=../request_interceptor/ class=md-nav__link> <span class=md-ellipsis> RequestInterceptor </span> </a> </li> <li class=md-nav__item> <a href=../decode_interceptor/ class=md-nav__link> <span class=md-ellipsis> DecodeInterceptor </span> </a> </li> <li class=md-nav__item> <a href=../preload/ class=md-nav__link> <span class=md-ellipsis> Preload </span> </a> </li> <li class=md-nav__item> <a href=../download_image/ class=md-nav__link> <span class=md-ellipsis> Download Image </span> </a> </li> <li class=md-nav__item> <a href=../lifecycle/ class=md-nav__link> <span class=md-ellipsis> Lifecycle </span> </a> </li> <li class=md-nav__item> <a href=../sketch_image_view/ class=md-nav__link> <span class=md-ellipsis> SketchImageView </span> </a> </li> <li class=md-nav__item> <a href=../long_image_grid_thumbnails/ class=md-nav__link> <span class=md-ellipsis> Clearer Thumbnail </span> </a> </li> <li class=md-nav__item> <a href=../progress_indicator/ class=md-nav__link> <span class=md-ellipsis> Progress Indicator </span> </a> </li> <li class=md-nav__item> <a href=../mime_type_logo/ class=md-nav__link> <span class=md-ellipsis> Mime Type Logo </span> </a> </li> <li class=md-nav__item> <a href=../save_cellular_traffic/ class=md-nav__link> <span class=md-ellipsis> Save Cellular Data </span> </a> </li> <li class=md-nav__item> <a href=../pause_load_when_scrolling/ class=md-nav__link> <span class=md-ellipsis> Pause Load When Scrolling </span> </a> </li> <li class=md-nav__item> <a href=../apk_app_icon/ class=md-nav__link> <span class=md-ellipsis> Apk/App Icon </span> </a> </li> <li class=md-nav__item> <a href=../log/ class=md-nav__link> <span class=md-ellipsis> Log </span> </a> </li> <li class=md-nav__item> <a href=../migrate/ class=md-nav__link> <span class=md-ellipsis> Migrate </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Change Log </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=change-log>Change Log<a class=headerlink href=#change-log title="Permanent link">&para;</a></h1> <p>Translations: <a href=CHANGELOG.zh.md>简体中文</a></p> <blockquote> <p>[!CAUTION] 1. The 4.x version has undergone a lot of destructive reconstruction and simplification to be compatible with Compose Multiplatform, and is not compatible with the 3.x version. 2. The maven groupId is upgraded to <code>io.github.panpf.sketch4</code>, so versions 2.* and 3.* will not prompt for upgrade. 3. Reference <a href=../migrate/ >《Migration Documentation》</a> migrating from 3.x to 4.x</p> </blockquote> <h1 id=440-alpha01>4.4.0-alpha01<a class=headerlink href=#440-alpha01 title="Permanent link">&para;</a></h1> <ul> <li>improve: DecodeConfig is now accessible from the common module</li> <li>new: Added the 'sketch-blurhash' module to support BlurHash. Please refer to the documentation for details. <a href=../blurhash/ >BlurHash</a>. <a href=https://github.com/panpf/sketch/issues/261>#261</a></li> </ul> <h1 id=431>4.3.1<a class=headerlink href=#431 title="Permanent link">&para;</a></h1> <ul> <li>fix: Fixed a bug that returned null when ThumbnailMemoryCacheStateImage starts with version 4.3.0. <a href=https://github.com/panpf/sketch/issues/263>#263</a></li> </ul> <h1 id=430>4.3.0<a class=headerlink href=#430 title="Permanent link">&para;</a></h1> <ul> <li>fix: Fixed a bug that caused the App to crash or image loading failure when ThumbnailMemoryCacheStateImage to encounter memory cache without ImageInfo. <a href=https://github.com/panpf/sketch/issues/259>#259</a></li> <li>fix: Fixed a bug where MemoryCacheRequestInterceptor failed to load images when they encountered a cache without ImageInfo. <a href=https://github.com/panpf/sketch/issues/260>#260</a></li> <li>break: 'sketch-compose-koin', 'sketch-view-koin', 'sketch-koin' The file name of the module has been changed from Singleton to Koin, and binary compatibility is corrupted. The library that depends on this may need to be recompiled.</li> <li>new: MemoryCache added entries() method to get all cache entries</li> <li>improve: Improve the performance of ThumbnailMemoryCacheStateImage, now iterates through all memory caches by default and improves the judgment accuracy of thumbnail images.</li> </ul> <h1 id=420>4.2.0<a class=headerlink href=#420 title="Permanent link">&para;</a></h1> <blockquote> <p>[!NOTE] There is no change compared to the 4.2.0-beta02 version</p> </blockquote> <ul> <li>fix: Fixed a bug that did not update download progress when using sketch-http-ktor3 and sketch-http-ktor2. <a href=https://github.com/panpf/sketch/issues/253>#253</a></li> <li>fix: Fixed the bug where AsyncImageState can still receive the cancel status of the old request after canceling the old request due to the new request.</li> <li>change: Deprecate AsyncImage with keepContentNoneStartOnDraw parameter</li> <li>change: Deprecate the fitScale property of TransitionTarget, adding ViewTarget.scaleType and ComposeTarget.contentsScale and ComposeTarget.alignment instead of fitScale</li> <li>change: AnimatedImage is now an interface, and its implementation class is SkiaAnimatedImage</li> <li>improve: Thin request logs and remove information that is not related to loading</li> <li>new: CrossfadePainter now supports contentScale and alignment</li> <li>new: ResizePainter now supports contentScale and alignment</li> <li>new: CrossfadeDrawable now supports scaleType</li> <li>new: ResizeDrawable now supports scaleType</li> <li>new: Added <code>sketch-compose-koin</code> and <code>sketch-view-koin</code> modules to provide Koin dependency injection support. <a href=https://github.com/panpf/sketch/issues/256>#256</a></li> <li>new: Added <code>Sketch(PlatformContext, (Sketch.Builder.() -&gt; Unit)? = null)</code> function and <code>Sketch.Builder.logger(Logger)</code> function</li> <li>new: ImageRequest, ImageOptions and ImageResult.Success add downloadCacheKey, downloadCacheKeyMapper, resultCacheKey, resultCacheKeyMapper, memoryCacheKey, memoryCacheKeyMapper properties. <a href=https://github.com/panpf/sketch/issues/255>#255</a></li> </ul> <h1 id=420-beta02>4.2.0-beta02<a class=headerlink href=#420-beta02 title="Permanent link">&para;</a></h1> <ul> <li>new: Added <code>sketch-compose-koin</code> and <code>sketch-view-koin</code> modules to provide Koin dependency injection support. <a href=https://github.com/panpf/sketch/issues/256>#256</a></li> <li>new: Added <code>Sketch(PlatformContext, (Sketch.Builder.() -&gt; Unit)? = null)</code> function and <code>Sketch.Builder.logger(Logger)</code> function</li> <li>new: ImageRequest, ImageOptions and ImageResult.Success add downloadCacheKey, downloadCacheKeyMapper, resultCacheKey, resultCacheKeyMapper, memoryCacheKey, memoryCacheKeyMapper properties. <a href=https://github.com/panpf/sketch/issues/255>#255</a></li> </ul> <h1 id=420-beta01>4.2.0-beta01<a class=headerlink href=#420-beta01 title="Permanent link">&para;</a></h1> <ul> <li>fix: Fixed a bug that did not update download progress when using sketch-http-ktor3 and sketch-http-ktor2. <a href=https://github.com/panpf/sketch/issues/253>#253</a></li> <li>fix: Fixed the bug where AsyncImageState can still receive the cancel status of the old request after canceling the old request due to the new request.</li> <li>change: Deprecate AsyncImage with keepContentNoneStartOnDraw parameter</li> <li>change: Deprecate the fitScale property of TransitionTarget, adding ViewTarget.scaleType and ComposeTarget.contentsScale and ComposeTarget.alignment instead of fitScale</li> <li>change: AnimatedImage is now an interface, and its implementation class is SkiaAnimatedImage</li> <li>improve: Thin request logs and remove information that is not related to loading</li> <li>new: CrossfadePainter now supports contentScale and alignment</li> <li>new: ResizePainter now supports contentScale and alignment</li> <li>new: CrossfadeDrawable now supports scaleType</li> <li>new: ResizeDrawable now supports scaleType</li> </ul> <h1 id=410>4.1.0<a class=headerlink href=#410 title="Permanent link">&para;</a></h1> <blockquote> <p>[!CAUTION] The compose multiplatform version 1.8.0 must be jvm 11 to compile. Please modify the configuration of sourceCompatibility, targetCompatibility, jvmTarget, etc. to 11+</p> </blockquote> <ul> <li>fix: Fixed a bug where CrossfadePainter, ResizePainter, ImageBitmapPainter and DrawablePainter cannot fill the canvas due to loss of floating point precision</li> <li>new: AsyncImage Adds the keepContentNoneStartOnDraw param</li> <li>depend: Update to kotlin 2.1.10</li> <li>depend: Update to compose multiplatform 1.8.0</li> <li>depend: Update to android-gif-drawable 1.2.29</li> <li>depend: Update to ffmpegMediaMetadataRetriever 1.0.19</li> <li>depend: Update to jetbrains-lifecycle 2.8.4</li> <li>depend: Update to kotlinx-coroutines 1.10.2</li> <li>depend: Update to ktor2 2.3.13</li> <li>depend: Update to ktor3 3.0.3</li> <li>depend: Update to okio 3.11.0</li> <li>depend: Don't replace <code>kotlin-stdlib-jdk7</code> and <code>kotlin-stdlib-jdk8</code> with <code>kotlin-stdlib</code></li> </ul> <h1 id=406>4.0.6<a class=headerlink href=#406 title="Permanent link">&para;</a></h1> <p>compose:</p> <ul> <li>improve: AsyncImage now no longer crashes when the window size is 0, but is a minimum of</li> <li>[#244](https://github.com/panpf/sketch/issues/244</li> </ul> <h1 id=405>4.0.5<a class=headerlink href=#405 title="Permanent link">&para;</a></h1> <p>fetch:</p> <ul> <li>fix: Fixed a bug in FileUriFetcher that failed to load the windows file path. <a href=https://github.com/panpf/sketch/issues/239>#239</a></li> </ul> <h1 id=404>4.0.4<a class=headerlink href=#404 title="Permanent link">&para;</a></h1> <p>compose:</p> <ul> <li>fix: Fixed a bug where AsyncImage and SubcomposeAsyncImage could not load images when component size is 0. <a href=https://github.com/panpf/sketch/issues/236>#236</a></li> <li>improve: Restore AsyncImage and SubcomposeAsyncImage function to replace window container size if width or height is 0 when setting size</li> </ul> <h1 id=403>4.0.3<a class=headerlink href=#403 title="Permanent link">&para;</a></h1> <ul> <li>fix: Fixed a bug that SvgDecoder could not recognize when there was comment on the head of the svg file. <a href=https://github.com/panpf/sketch/issues/232>#232</a></li> </ul> <h1 id=402>4.0.2<a class=headerlink href=#402 title="Permanent link">&para;</a></h1> <p>compose:</p> <ul> <li>fix: The AsyncImage component is reloaded when the current window size changes. <a href=https://github.com/panpf/sketch/issues/231>#231</a></li> </ul> <h1 id=401>4.0.1<a class=headerlink href=#401 title="Permanent link">&para;</a></h1> <p>android:</p> <ul> <li>fix: Fixed a bug where Resources were not set when BitmapImage was converted to BitmapDrawable, causing the Intrinsic size of BitmapDrawable to be inconsistent with Bitmap. <a href=https://github.com/panpf/sketch/issues/226>#226</a></li> </ul> <h1 id=400-stable>4.0.0 Stable<a class=headerlink href=#400-stable title="Permanent link">&para;</a></h1> <p>Sketch:</p> <ul> <li>change: SketchSingleton refactored into SingletonSketch</li> <li>change: Sketch's execute(DownloadRequest) and enqueue(DownloadRequest) methods are refactored into executeDownload(ImageRequest) and enqueueDownload(ImageRequest)</li> <li>new: Sketch.Builder and ComponentRegistry.Builder added addComponents() function</li> <li>new: Sketch.Builder adds networkParallelismLimited() and decodeParallelismLimited() Method to control the number of network and decoding concurrency. <a href=https://github.com/panpf/sketch/issues/200>#200</a></li> <li>new: Added ComponentLoader, which supports automatic detection and registration of Fetcher and Decoder components. All components in the built-in module are supported.</li> </ul> <p>request:</p> <ul> <li>change: There is no longer a distinction between Display, Load and Download, now there is only one ImageRequest, ImageResult and ImageListener</li> <li>change: The requestKey attribute of ImageResult has been removed, and the requestCacheKey attribute has been renamed to cacheKey.</li> <li>change: Now Target, ImageResult, DecodeResult all use Image</li> <li>change: SketchDrawable's imageUri, requestKey, requestCacheKey, imageInfo, dataFrom, transformedList, extras and other attributes have been removed, now please get them from ImageResult</li> <li>change: depth and depthFrom properties merged into DepthHolder</li> <li>change: Android platform-specific APIs such as bitmapConfig, colorSpace, preferQualityOverSpeed, placeholder(Int), fallback(Int), error(Int), etc. are provided in the form of extension functions</li> <li>change: resizeApplyToDrawable renamed to resizeOnDraw</li> <li>change: Parameters renamed to Extras</li> <li>change: LongImageClipPrecisionDecider renamed to LongImagePrecisionDecider, LongImageStartCropScaleDecider renamed to LongImageScaleDecider</li> <li>remove: Removed listener() and progressListener() methods, now use addListener() and addProgressListener() methods</li> <li>new: Added 'sizeMultiplier: Float' attribute for setting the scaling ratio of image size</li> <li>new: Added 'allowNullImage: Boolean' attribute</li> </ul> <p>fetch:</p> <ul> <li>change: The parameter passed in Fetcher.Factory.create() is changed to RequestContext</li> <li>new: ResourceUriFetcher supports 'android.resource:///drawable/ic_launcher' and 'android.resource: ///1031232' uris</li> <li>new: AssetUriFetcher supports 'file:///android_asset/' uri</li> </ul> <p>source:</p> <ul> <li>change: Refactor DataSource</li> </ul> <p>decode:</p> <ul> <li>change: BitmapDecoder and DrawableDecoder merged into Decoder</li> <li>change: Decoder's decode() method removes the suspend modifier and changes the return type from Result<decoderesult> to DecodeResult</li> <li>change: BitmapDecodeInterceptor and DrawableDecodeInterceptor merged into DecodeInterceptor</li> <li>change: BitmapConfig refactored to BitmapColorType</li> <li>improve: Improve the accuracy of animation-related Decoder in determining the image type. No longer rely on the mimeType attribute of FetchResult because it may be inaccurate.</li> <li>new: DrawableDecoder supports colorSpace</li> </ul> <p>transformation:</p> <ul> <li>fix: Fix the bug that CircleCrop, Rotate, RoundedCorners Transformation does not work at RGB_565. <a href=https://github.com/panpf/sketch/issues/209>#209</a></li> <li>fix: Fixed the bug that Transformations such as blur and rotate on the Android platform did not keep the ColorSpace unchanged. <a href=https://github.com/panpf/sketch/issues/213>#213</a></li> <li>change: Transformation's transform() method removes the suspend modifier</li> </ul> <p>cache:</p> <ul> <li>remove: Remove BitmapPool and its related disallowReuseBitmap attribute, CountBitmap, and SketchCountBitmapDrawable classes</li> <li>change: Refactor DiskCache SnapShot and Editor, get() and edit() are changed to openSnapShot() and openEditor(), and openSnapShot() and openEditor() of the same key now conflict with each other, openEditor always returns null before openSnapshot is closed.</li> <li>change: Refactor MemoryCache.Value</li> </ul> <p>state:</p> <ul> <li>change: uriEmpty property of ImageRequest and ImageOptions renamed to fallback</li> <li>change: The type of error attribute of ImageRequest and ImageOptions changed from ErrorStateImage to StateImage</li> <li>change: ErrorStateImage removes ErrorStateImage.Builder.uriEmptyError() method and refactors it into ConditionStateImage</li> <li>improve: Improve IconDrawable, support fixed-size background and restrict icons to have fixed sizes or specify iconSize</li> </ul> <p>animated:</p> <ul> <li>fix: Fixed the bug that GifDrawable and MovieDrawable could not apply animatedTransformation correctly. <a href=https://github.com/panpf/sketch/issues/214>#214</a></li> <li>fix: Fixed the bug that the repeatCount setting of GifDrawableDecoder should be increased by 1 by mistake. <a href=https://github.com/panpf/sketch/issues/215>#215</a></li> <li>change: Split the sketch-animated module into sketch-animated-core and sketch-animated-gif, sketch-animated-webp, sketch-animated-heif, sketch-animated-koralgif module and rename it to sketch-animated-gif-koral</li> </ul> <p>http:</p> <ul> <li>remove: Removed setHttpHeader() and addHttpHeader() methods of DisplayRequest.Builder and DisplayOptions.Builder</li> <li>change: The http function is split into separate modules. The sketch-http, sketch-http-hurl, sketch-http-ktor2, and sketch-http-ktor3 modules are added. The sketch-okhttp module is renamed sketch-http-okhttp.</li> </ul> <p>compose:</p> <ul> <li>fix: Fix the bug that the filterQuality parameter of AsyncImage is invalid. <a href=https://github.com/panpf/sketch/issues/211>#211</a></li> <li>remove: AsyncImage composable function removes placeholder, error, uriEmpty, onLoading, onSuccess, onError parameters</li> <li>new: AsyncImageState can now set ImageOptions, for example: 'rememberAsyncImageState { ImageOptions() }'</li> <li>new: Added ErrorStateImage.Builder.saveCellularTrafficError(DrawableResource) extension function</li> <li>new: ImageRequest.Builder and ImageOptions.Builder add size(IntSize) extension function</li> <li>new: AsyncImageState adds onPainterState and onLoadState properties, which are used to receive PainterState and LoadState updates in the form of callbacks.</li> <li>new: Added ComposableImageRequest() and ComposableImageOptions() functions, which can be used directly on placeholder, error, and fallback methods using DrawableResource</li> </ul> <p>view:</p> <ul> <li>fix: Fix the bug that the image cannot be loaded when the ImageView is attached to the window but size is null due to padding. <a href=https://github.com/panpf/sketch/issues/208>#208</a></li> <li>change: displayImage renamed to loadImage</li> <li>change: ImageView.disposeDisplay() renamed to ImageView.disposeLoad()</li> <li>new: ImageRequest.Builder and ImageOptions.Builder add sizeWithView() and sizeWithDisplay() extension functions</li> </ul> <p>extensions:</p> <ul> <li>fix: Fix the bug of exception when AppIconUriFetcher.Factory parses versionCode. <a href=https://github.com/panpf/sketch/issues/204>#204</a></li> <li>change: Split the sketch-extensions-apkicon and sketch-extensions-appicon modules from the sketch-extensions-core module</li> </ul> <p>other:</p> <ul> <li>upgrade: Android minimum API raised to API 21</li> <li>depend: Upgrade kotlin 2.0.21, kotlinx coroutines 1.9.0</li> <li>depend: Upgrade jetbrains compose 1.7.0, jetbrains lifecycle 2.8.3</li> </ul> <h1 id=v400-rc01>v4.0.0-rc01<a class=headerlink href=#v400-rc01 title="Permanent link">&para;</a></h1> <p>compose:</p> <ul> <li>new: AsyncImageState adds onPainterState and onLoadState properties, which are used to receive PainterState and LoadState updates in the form of callbacks.</li> </ul> <h1 id=v400-beta03>v4.0.0-beta03<a class=headerlink href=#v400-beta03 title="Permanent link">&para;</a></h1> <p>core:</p> <ul> <li>new: Added Image.asBitmap(), asBitmapOrNull(), asDrawableOrNull(), asPainterOrNull() extension functions</li> <li>improve: The defaultImage property of ConditionStateImage and ComposableConditionStateImage is now nullable</li> </ul> <p>decode:</p> <ul> <li>improve: Improve to determine whether regional decoding is supported based on mimeType. Non-image types directly return false. On non-Android platforms, based on the skiko version, it is determined whether heic, heif, and avi types are supported.</li> </ul> <p>fetch:</p> <ul> <li>improve: AssetUriFetcher and ResourceUriFetcher are now compatible with the sketch3 protocol</li> </ul> <h1 id=400-beta02>4.0.0-beta02<a class=headerlink href=#400-beta02 title="Permanent link">&para;</a></h1> <p>core:</p> <ul> <li>fix: Fixed a bug that caused REMOVE records to be lost due to disk cache being killed, and re-initialization did not verify whether the file existed, causing size() exceptions. <a href=https://github.com/panpf/sketch/issues/219>#219</a></li> </ul> <p>animated:</p> <ul> <li>fix: Fixed the bug that the dependency of sketch-animated-heif accidentally included the local test module. <a href=https://github.com/panpf/sketch/issues/220>#220</a></li> </ul> <h1 id=400-beta01>4.0.0-beta01<a class=headerlink href=#400-beta01 title="Permanent link">&para;</a></h1> <p>core:</p> <ul> <li>remove: Remove Image.getPixels()</li> <li>remove: Remove the AnyThread, MainThread, IntRange, and IntDef annotations under the ' com.github.panpf.sketch.annotation' package and use the alternatives under the ' androidx.annotation' package</li> <li>change: Merge AndroidBitmapImage and SkiaBitmapImage into BitmapImage</li> <li>change: DrawableEqualizer renamed to EquitableDrawable</li> <li>change: Remove AndroidBitmap, SkiBitmap, SkiaImageInfo, SkiaImage, SkiaRect</li> <li>change: SkiaAnimatedImage renamed to AnimatedImage</li> <li>change: ImageRequest's registerListener and registerProgressListener methods renamed to addListener and addProgressListener</li> <li>new: Added ComponentLoader, which supports automatic detection and registration of Fetcher and Decoder components. All components in the built-in module are supported.</li> </ul> <p>compose:</p> <ul> <li>fix: Fix the bug that the filterQuality parameter of AsyncImage is invalid. <a href=https://github.com/panpf/sketch/issues/211>#211</a></li> <li>remove: Remove ComposeBitmapImage</li> <li>remove: Remove PainterState.Empty</li> <li>change: PainterEqualizer renamed to EquitablePainter</li> <li>change: ComposeImagePainter renamed to ImageBitmapPainter, SkiaAnimatedImagePainter renamed to AnimatedImagePainter</li> </ul> <p>view:</p> <ul> <li>fix: Fix the bug that the image cannot be loaded when the ImageView is attached to the window but size is null due to padding. <a href=https://github.com/panpf/sketch/issues/208>#208</a></li> </ul> <p>decode:</p> <ul> <li>change: Decoder's decode() method removes the suspend modifier and changes the return type from Result<decoderesult> to DecodeResult</li> <li>change: BitmapConfig refactored to BitmapColorType</li> <li>new: Non-Android platforms now also support ColorType</li> <li>new: Non-Android platforms now also support ColorSpace</li> <li>new: DrawableDecoder supports colorSpace</li> </ul> <p>fetch:</p> <ul> <li>change: The parameter passed in Fetcher.Factory.create() is changed to RequestContext</li> </ul> <p>cache:</p> <ul> <li>change: SkiaBitmapImage is now cached in the memory cache on non-Android platforms, not ComposeBitmapImage.</li> <li>change: The default memory cache size is now 256MB for desktop and web platforms and 128MB for ios platforms</li> </ul> <p>http:</p> <ul> <li>remove: Removed the setHttpHeader() and addHttpHeader() methods of ImageRequest.Builder and ImageOptions.Builder</li> <li>change: Remove the sketch-http-core module, add the sketch-http-hurl module, rename the sketch-http-ktor module to sketch-http-ktor2 and no longer support wasmJs, add the sketch-http-ktor3 module</li> </ul> <p>animated:</p> <ul> <li>fix: Fixed the bug that on non-Android platforms, animations set repeatCount and do not stay on the last frame after playing, but stay on the first frame. <a href=https://github.com/panpf/sketch/issues/212>#212</a></li> <li>fix: Fixed the bug that GifDrawable and MovieDrawable could not apply animatedTransformation correctly. <a href=https://github.com/panpf/sketch/issues/214>#214</a></li> <li>fix: Fixed the bug that the repeatCount setting of GifDrawableDecoder should be increased by 1 by mistake. <a href=https://github.com/panpf/sketch/issues/215>#215</a></li> <li>change: Split the sketch-animated module into sketch-animated-core and sketch-animated-gif, sketch-animated-webp, sketch-animated-heif, sketch-animated-koralgif module and rename it to sketch-animated-gif-koral</li> <li>improve: animatedTransformation now supports non-Android platforms</li> </ul> <p>transformation:</p> <ul> <li>fix: Fix the bug that CircleCrop, Rotate, RoundedCorners Transformation does not work at RGB_565. <a href=https://github.com/panpf/sketch/issues/209>#209</a></li> <li>fix: Fixed the bug that Transformations such as blur and rotate on the Android platform did not keep the ColorSpace unchanged. <a href=https://github.com/panpf/sketch/issues/213>#213</a></li> <li>change: Transformation's transform() method removes the suspend modifier</li> </ul> <p>state:</p> <ul> <li>change: The type of error attribute of ImageRequest and ImageOptions changed from ErrorStateImage to StateImage</li> <li>change: ErrorStateImage is refactored into ConditionStateImage, and ConditionStateImage can be used in placeholder and fallback</li> <li>improve: Improve IconDrawable, support fixed-size background and restrict icons to have fixed sizes or specify iconSize</li> <li>improve: Improve IconPainter, support fixed-size background and restrict icons to have fixed sizes or specify iconSize</li> <li>new: Added 'Drawable.asStateImage(Any)' and 'ColorDrawable.asStateImage()' extension functions</li> </ul> <p>extensions:</p> <ul> <li>fix: Fixed the bug that the equals method of RingProgressDrawable, SectorProgressDrawable, RingProgressPainter, SectorProgressPainter did not execute as expected. <a href=https://github.com/panpf/sketch/issues/210>#210</a></li> <li>change: Split the sketch-extensions-apkicon and sketch-extensions-appicon modules from the sketch-extensions-core module</li> </ul> <p>other:</p> <ul> <li>depend: Upgrade kotlin 2.0.21, kotlinx coroutines 1.9.0</li> <li>depend: Upgrade jetbrains compose 1.7.0, jetbrains lifecycle 2.8.3</li> </ul> <h1 id=400-alpha08>4.0.0-alpha08<a class=headerlink href=#400-alpha08 title="Permanent link">&para;</a></h1> <ul> <li>fix: Fixed the bug that the ComposableImageRequest() and ComposableImageOptions() functions cannot listen and update the Compose State. <a href=https://github.com/panpf/sketch/issues/207>#207</a></li> <li>fix: Fix the bug that CircleCrop, Rotate, RoundedCorners Transformation does not work at RGB_565. <a href=https://github.com/panpf/sketch/issues/209>#209</a></li> <li>remove: Remove SkiaExifOrientationHelper</li> <li>remove: DataSource removes sketch and request attributes</li> <li>change: DataSource's getFile() and getFileOrNull() methods add Sketch parameters</li> <li>change: DataSource's openSourceOrNull() and getFileOrNull() methods are now available as extension functions</li> <li>change: RequestContext moved to 'com.github.panpf.sketch.request' package</li> <li>new: SkiaBitmapImage now supports memory caching</li> <li>new: DataSource adds key attribute</li> </ul> <h1 id=400-alpha07>4.0.0-alpha07<a class=headerlink href=#400-alpha07 title="Permanent link">&para;</a></h1> <ul> <li>improve: SkiaAnimatedImagePainter now does not share Bitmap for decoding and drawing to avoid cluttered images. <a href=https://github.com/panpf/sketch/issues/206>#206</a></li> <li>improve: SkiaAnimatedImagePainter now still does not start animation when drawing, it will automatically load the first frame</li> <li>new: SkiaAnimatedImagePainter now supports caching frames that take longer to decode than the frame duration to improve playback smoothness, but this uses more memory, closed by default, enabled through 'cacheDecodeTimeoutFrame()' function</li> </ul> <h1 id=400-alpha06>4.0.0-alpha06<a class=headerlink href=#400-alpha06 title="Permanent link">&para;</a></h1> <ul> <li>fix: Fixed a bug where SkiaAnimatedImagePainter crashed when encountering disguised gif images. <a href=https://github.com/panpf/sketch/issues/205>#205</a></li> <li>improve: Improve the accuracy of animation-related Decoder in determining the image type. No longer rely on the mimeType attribute of FetchResult because it may be inaccurate.</li> </ul> <h1 id=400-alpha05>4.0.0-alpha05<a class=headerlink href=#400-alpha05 title="Permanent link">&para;</a></h1> <ul> <li>fix: Fix the bug of exception when AppIconUriFetcher.Factory parses versionCode. <a href=https://github.com/panpf/sketch/issues/204>#204</a></li> <li>change: KotlinResourceUriFetcher supported uri changed from 'kotlin.resource://' to 'file:///kotlin_resource/'</li> <li>change: ComposeResourceUriFetcher supported uri changed from 'compose.resource://' to file:///compose_resource/</li> <li>change: The uri supported by ResourceUriFetcher has been changed from 'android.resource: //resource?resType=drawable&amp;resName=ic_launcher' and 'android.resource://resource?resId=1031232' to 'android.resource:///drawable/ic_launcher' and ' android.resource:///1031232'</li> <li>change: AssetUriFetcher supported uri changed from 'asset://' to 'file:///android_asset/'</li> <li>change: ImageRequest.uri property type changed from String to Uri</li> <li>improve: All implementation classes of DataSource implement equals and hashCode methods</li> <li>improve: All implementation classes of Fetcher implement equals and hashCode methods</li> </ul> <h1 id=400-alpha04>4.0.0-alpha04<a class=headerlink href=#400-alpha04 title="Permanent link">&para;</a></h1> <ul> <li>fix: Fixed the issue where HurlStack and OkHttpStack failed to control network concurrency due to switching threads again. <a href=https://github.com/panpf/sketch/issues/199>#199</a></li> <li>fix: Fixed the bug that decoding pictures will not start until all network tasks are completed. <a href=https://github.com/panpf/sketch/issues/201>#201</a></li> <li>change: The mergeComponents() method of ImageOptions and ImageRequest has been renamed to addComponents()</li> <li>change: The drawableResId parameter of ImageView.loadImage() and newResourceUri() functions was renamed to resId</li> <li>change: AndroidLogPipeline and PrintLogPipeline are changed to singleton mode</li> <li>improve: Check the type of PlatformContext to prevent passing Activity to Sketch or ImageRequest</li> <li>new: Add PlatformContext.sketch and View.sketch extension functions</li> <li>new: Sketch.Builder and ComponentRegistry.Builder added addComponents() function</li> <li>new: Sketch.Builder adds networkParallelismLimited() and decodeParallelismLimited() methods to control the number of network and decoding concurrency. <a href=https://github.com/panpf/sketch/issues/200>#200</a></li> </ul> <h1 id=400-alpha03>4.0.0-alpha03<a class=headerlink href=#400-alpha03 title="Permanent link">&para;</a></h1> <ul> <li>change: ComposeBitmapValue renamed to ComposeBitmapImageValue</li> <li>change: Refactor Sketch.enqueueDownload() and executeDownload() and move from sketch-extensions-core module to sketch-core module</li> <li>change: LongImageClipPrecisionDecider renamed to LongImagePrecisionDecider, LongImageStartCropScaleDecider renamed to LongImageScaleDecider</li> <li>change: Revert to using screen size as final Size when building ImageRequest</li> <li>improve: Painter.asSketchImage() now returns PainterImage; ComposeBitmap.asSketchImage() now returns ComposeBitmapImage</li> <li>new: ImageRequest.Builder and ImageOptions.Builder add sizeWithView(), sizeWithDisplay(), size( IntSize) extension functions</li> </ul> <h1 id=400-alpha02>4.0.0-alpha02<a class=headerlink href=#400-alpha02 title="Permanent link">&para;</a></h1> <ul> <li>change: ImageView.disposeDisplay() renamed to ImageView.disposeLoad()</li> <li>new: Added ImageRequest.Builder.composableError() and ImageOptions.Builder.composableError() extension functions</li> <li>new: Added ErrorStateImage.Builder.saveCellularTrafficError(DrawableResource) extension function</li> </ul> <h1 id=400-alpha01>4.0.0-alpha01<a class=headerlink href=#400-alpha01 title="Permanent link">&para;</a></h1> <p>Sketch:</p> <ul> <li>change: SketchSingleton refactored into SingletonSketch</li> </ul> <p>request:</p> <ul> <li>change: There is no longer a distinction between Display, Load and Download, now there is only one ImageRequest, ImageResult and ImageListener</li> <li>change: The requestKey attribute of ImageResult has been removed, and the requestCacheKey attribute has been renamed to cacheKey.</li> <li>change: Now Target, ImageResult, DecodeResult all use Image</li> <li>change: SketchDrawable's imageUri, requestKey, requestCacheKey, imageInfo, dataFrom, transformedList, extras and other properties have been removed, now please get them from ImageResult</li> <li>change: depth and depthFrom properties merged into DepthHolder</li> <li>change: Android platform-specific APIs such as bitmapConfig, colorSpace, preferQualityOverSpeed, placeholder(Int), fallback(Int), error(Int), etc. are provided in the form of extension functions</li> <li>change: resizeApplyToDrawable renamed to resizeOnDraw</li> <li>change: Parameters renamed to Extras</li> <li>new: Added 'sizeMultiplier: Float' attribute to set the scaling ratio of the image size</li> <li>new: Added 'allowNullImage: Boolean' attribute</li> </ul> <p>decode:</p> <ul> <li>change: BitmapDecoder and DrawableDecoder merged into Decoder</li> <li>change: BitmapDecodeInterceptor and DrawableDecodeInterceptor merged into DecodeInterceptor</li> </ul> <p>cache:</p> <ul> <li>remove: Remove BitmapPool and its related disallowReuseBitmap attribute, CountBitmap, and SketchCountBitmapDrawable classes</li> <li>change: Refactor DiskCache SnapShot and Editor, get() and edit() are changed to openSnapShot() and openEditor(), and openSnapShot() and openEditor() of the same key now conflict with each other, openEditor always returns null before openSnapshot is closed.</li> <li>change: Refactor MemoryCache.Value</li> </ul> <p>state:</p> <ul> <li>change: uriEmpty attribute of ImageRequest and ImageOptions renamed to fallback</li> <li>remove: Delete ErrorStateImage.Builder.uriEmptyError()</li> </ul> <p>compose:</p> <ul> <li>remove: AsyncImage composable function removes placeholder, error, uriEmpty, onLoading, onSuccess, onError parameters</li> <li>upgrade：Compose Multiplatform upgraded to 1.6.10</li> <li>new: AsyncImageState can now set ImageOptions, for example: 'rememberAsyncImageState { ImageOptions() }'</li> </ul> <p>view:</p> <ul> <li>change: displayImage renamed to loadImage</li> </ul> <p>other:</p> <ul> <li>upgrade：Android minimum API raised to API 21</li> <li>upgrade：kotlin is upgraded to 2.0.0, mainly to support Compose Multiplatform 1.6.10</li> </ul> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../migrate/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Migrate"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Migrate </div> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024 panpf </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/panpf/sketch target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["content.tabs", "content.code.annotate", "content.code.copy", "navigation.indexes", "navigation.sections", "navigation.expand", "navigation.footer", "navigation.instant", "navigation.tracking", "search.highlight", "search.suggest", "search.share"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../assets/javascripts/bundle.50899def.min.js></script> </body> </html>